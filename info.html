<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>상세 정보</title>
  <style>
    body {
      margin: 0;
      font-family: 'Noto Sans KR', sans-serif;
      background: white;
      color: #333;
    }
    .container {
      display: flex;
      flex-direction: column;
    }
    .image-wrapper {
      position: relative;
      width: 100%;
      height: 250px;
      overflow: hidden;
    }
    .image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .info-box {
      padding: 1.5rem;
      background: white;
      border-radius: 0 0 12px 12px;
    }
    .info-box h2 {
      margin: 0;
      font-size: 1.4rem;
    }
    .info-box .category {
      font-size: 0.9rem;
      color: gray;
      margin-bottom: 1rem;
    }
    .info-box .label {
      font-weight: bold;
      margin-top: 0.5rem;
    }
    .thumbnails {
      display: flex;
      gap: 0.5rem;
      padding: 1rem 0;
      flex-wrap: wrap;
    }
    .thumbnails img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 6px;
      border: 1px solid #ccc;
      cursor: pointer; /* 클릭 가능함을 표시 */
    }
    .fullscreen-viewer {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0,0,0,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .fullscreen-viewer img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 8px;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="image-wrapper">
    <img id="place-img" src="" alt="대표 이미지">
  </div>
  <div class="info-box">
    <h2 id="place-name">정보를 불러오는 중...</h2>
    <div class="category" id="category"></div>

    <div><span class="label">도로명</span> <div id="address"></div></div>
    <div><span class="label">영업시간</span> <div id="hours"></div></div>
    <div><span class="label">번호</span> <div id="phone"></div></div>
    <div><span class="label">제휴혜택</span> <div id="benefit"></div></div>
    <div class="thumbnails" id="thumbnails"></div>
  </div>
</div>

<!-- 1. data.js 파일을 먼저 불러옵니다. -->
<script src="data.js"></script>

<!-- 2. 불러온 데이터를 사용하여 페이지를 채우는 스크립트를 실행합니다. -->
<script>
  const params = new URLSearchParams(location.search);
  const nameFromUrl = decodeURIComponent(params.get("name"));

  // data.js에서 불러온 storeData 배열에서 이름이 일치하는 가게를 찾습니다.
  const data = storeData.find(store => store.name === nameFromUrl);

  if (data) {
    document.getElementById("place-img").src = data.image;
    document.getElementById("place-name").textContent = data.name;
    document.getElementById("category").textContent = data.type; // data.js의 type 필드를 사용
    document.getElementById("address").innerHTML = data.address;
    document.getElementById("hours").innerHTML = data.hours;
    document.getElementById("phone").innerHTML = data.phone;
    document.getElementById("benefit").innerHTML = data.benefit;

    // 추가 이미지(썸네일) 표시 로직
    const thumbnailsContainer = document.getElementById("thumbnails");
    if (data.subImages && data.subImages.length > 0) {
      data.subImages.forEach(url => {
        const img = document.createElement("img");
        img.src = url;
        img.alt = "추가 이미지";
        
        // 썸네일 클릭 시 전체 화면으로 보여주는 이벤트 추가
        img.addEventListener("click", () => {
          const viewer = document.createElement("div");
          viewer.className = "fullscreen-viewer";
          viewer.innerHTML = `<img src="${url}">`;
          viewer.addEventListener("click", () => viewer.remove());
          document.body.appendChild(viewer);
        });

        thumbnailsContainer.appendChild(img);
      });
    }

  } else {
    document.querySelector(".info-box").innerHTML = "<h2>정보를 찾을 수 없습니다.</h2><p>요청하신 가게의 정보를 찾지 못했습니다.</p>";
  }
</script>
</body>
</html>
