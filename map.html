<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì§€ë„í˜ì´ì§€19</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <script>
    window.chtlConfig = { chatbotId: "7743599443" }
  </script>
  <script async data-id="7743599443" id="chtl-script" type="text/javascript" src="https://chatling.ai/js/embed.js"></script>
  
  <style>
     


.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.75);
  color: white;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  text-align: left;
  padding: 0.8rem 1rem 0.6rem 0.7rem;


  /* í•µì‹¬: ê¸°ë³¸ê°’ì—ì„œ ì•ˆë³´ì´ê²Œ + ì´ë²¤íŠ¸ ë§‰ê¸° */
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
  z-index: 2;
}

.view-toggle-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
  width: 85vw;             /* map-containerì™€ ë™ì¼í•œ ë„ˆë¹„ */
  max-width: none;         /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ ì œê±° */
  margin-top: 4rem;
  margin-bottom: 1rem;
}
    .view-toggle-buttons button {
      background-color: #ffffff;
      color: #333;
      border: none;
      padding: 0.4rem 1rem;
      font-size: 0.95rem;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: background-color 0.2s;
    }

    .view-toggle-buttons button:hover {
      background-color: #e0e0e0;
    }

#map-container {
  display: flex;
  flex-direction: row;
  width: 85vw;           /* í™”ë©´ ë„ˆë¹„ì˜ 85% */
  height: 80vh;          /* í™”ë©´ ë†’ì´ì˜ 80% */
  max-width: none;       /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ ì œê±° (ì„ íƒì‚¬í•­) */
  background-color: transparent;
  gap: 10px;
}

#iframeBox {
  opacity: 0;
  transform: translateX(30px);
  transition: all 0.4s ease;
  pointer-events: none;
  width: 0;
  overflow: hidden;

  /* ì›ë˜ì˜ ë””ìì¸ ë³µêµ¬ ìš”ì†Œë“¤ */
  background-color: white;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  position: relative;
  height: 100%;
}

#map {
  width: 100%;
  transition: width 0.4s ease;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  position: relative;
  overflow: hidden;
  height: 100%;
}


#iframeBox iframe {
  width: 100%;
  height: 100%;
  border: none;
  display: none;
}


#iframeBox .close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  z-index: 10;
}



#map-container.half-map #map {
  width: 50%;
}

#map-container.half-map #iframeBox {
  width: 50%;
  opacity: 1;
  transform: translateX(0);
  pointer-events: auto;
}

    @media (max-width: 768px) {
      #map-container {
        width: 95%;
        height: 600px;
      }
    }

    @media (max-width: 480px) {
      header {
        justify-content: center;
        flex-direction: column;
      }
      .school-name {
        flex-basis: 100%;
        text-align: center;
        margin-bottom: 0.5rem;
      }
      .nav-buttons {
        justify-content: center;
        max-width: 100%;
      }
      .nav-buttons button {
        font-size: 0.9rem;
        padding: 0.3rem 0.5rem;
      }
    }

    

    #overlay.active {
      display: block;
    }

    .label-text {
      color: black;
      white-space: nowrap;
      font-size: 12px;
    }

    /* ğŸ‘‡ ì¶”ê°€ëœ ë²„íŠ¼ ìƒ‰ìƒ ìŠ¤íƒ€ì¼ */
    #show-all-markers,
    #show-red-markers,
    #show-purple-markers {
      color: black;
      border: 2px solid #070707;
    }

    #show-all-markers {
      background-color: #7c7c7c;
    }

    #show-red-markers {
      background-color: #fdd2d2;
    }

    #show-purple-markers {
      background-color: #dfd4fc;
    }

#show-all-markers:hover {
  background-color: #6a6a6a;
}

#show-red-markers:hover {
  background-color: #fbbbbb;
}

#show-purple-markers:hover {
  background-color: #cfc2f2;
}



body {
 height: 100vh;           /* ì „ì²´ í™”ë©´ ë†’ì´ ê³ ì • */
  margin: 0;
overflow: hidden;        /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ ì œê±° */
  font-family: 'Helvetica Neue', 'Apple SD Gothic Neo', 'Malgun Gothic', 'Noto Sans KR', Arial, sans-serif;
  color: white;
  overflow-x: hidden;
  
  background: linear-gradient(to bottom, #3f3f3f 30%, #d0d0d0 90%);
}

header {
  overflow: visible;
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px;                      /* â† ë†’ì´ ê³ ì • */
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1.5rem;                 /* â† ìœ„ì•„ë˜ padding ì œê±° */
  background-color: transparent;
  z-index: 1000;
  box-sizing: border-box;
  flex-shrink: 0;
}

.school-name {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
  flex-shrink: 0;
}

.nav-buttons {
  display: flex;
  gap: 1rem;
  flex-wrap: nowrap;
  overflow-x: auto;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.nav-buttons a,
.nav-buttons .dropbtn,
.nav-buttons button {
  color: white;
  background: transparent;
  border: none;
  font-size: 1rem;
  text-decoration: none;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
}

.nav-buttons .signup {
  border: 1px solid white;
  border-radius: 5px;
  padding: 0.3rem 0.8rem;
}

.nav-buttons::-webkit-scrollbar {
  display: none;
}

.nav-buttons button {
  background: transparent;
  border: none;
  color: white;
  font-size: 1rem;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
}

.nav-buttons .signup {
  border: 1px solid white;
  border-radius: 5px;
  padding: 0.3rem 0.8rem;
}

main {
  height: 100vh;
  padding: 0;
  margin: 0;
  min-height: unset;               /* â† min-height ì‚­ì œ */
  display: flex;
  flex-direction: column;
  justify-content: flex-start;  /* ì¤‘ì•™ì—ì„œ â†’ ìœ„ë¡œ ì •ë ¬ */
  align-items: center;
  background: linear-gradient(to bottom, #3f3f3f 10%, #f5fef5 90%);
}

.main-title {
  text-align: center;
  font-size: 3rem;
  margin-bottom: 0.5rem;
  color: white;
}

.subtitle {
  text-align: center;
  font-size: 1.5rem;
  margin-bottom: 2rem;
  color: white;
}


/* ì‚¬ì´ë“œë°” */
#side-nav {
  position: fixed;
  top: 0;
  right: -280px;
  width: 280px;
  height: 100vh;
  background-color: #000;
  color: white;
  box-shadow: -4px 0 8px rgba(0,0,0,0.7);
  transition: right 0.3s ease;
  z-index: 1500;
  display: flex;
  flex-direction: column;
  padding: 2rem 1.5rem;
  box-sizing: border-box;
}

#side-nav.open {
  right: 0;
}

#side-nav button.close-btn {
  align-self: flex-end;
  background: transparent;
  border: none;
  color: white;
  font-size: 1.8rem;
  cursor: pointer;
  margin-bottom: 2rem;
}

#side-nav nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

#side-nav nav ul li button,
#side-nav nav ul li a {
  background: none;
  border: none;
  color: white;
  font-size: 1.1rem;
  cursor: pointer;
  text-align: left;
  width: 100%;
  padding: 0;
  display: block;
  text-decoration: none;
}

#side-nav nav ul li button {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#side-nav nav ul li ul {
  display: none;
  flex-direction: column;
  padding-left: 1rem;
  margin-top: 1rem;
  list-style-type: none;
}

#side-nav nav ul li ul li a {
  font-size: 1rem;
  padding: 0rem 0;
  color: white;
  text-decoration: none;
  cursor: pointer;
}

#side-nav nav ul li ul li a:hover {
  text-decoration: underline;
}



/* ë“œë¡­ë‹¤ìš´ */
.dropdown {
  position: relative;
}

.dropbtn {
  color: white;
  cursor: pointer;
  padding: 0.3rem 0.5rem;
}
.dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #444;
  border-radius: 5px;
  min-width: 140px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  z-index: 1001;
}
.dropdown-content a {
  width: 77%;      
  display: block;
  padding: 0.5rem 1rem;
  color: white;
  text-decoration: none;
  font-size: 0.9rem;
}
.dropdown .dropbtn {
  color: white;
  background: transparent;
  border: none;
  font-size: 1rem;
  text-decoration: none;
  cursor: pointer;
  white-space: nowrap;
  padding: 0.3rem 0.5rem;
}

.dropdown-content li a {
  display: block;
  padding: 0.6rem 1rem;
  color: white;
  text-decoration: none;
  font-size: 0.9rem;
}


.dropdown-content li a:hover {
  background-color: #666;
}

/* í•µì‹¬: hover ì‹œ ì—´ê¸° */
.dropdown:hover .dropdown-content {
  display: block;
}
.dropdown-content a:hover {
  background-color: #666;
}


/* ê¸°ë³¸ ìˆ¨ê¹€ */
.nav-buttons li.dropdown ul.dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #444;
  min-width: 140px;
  border-radius: 5px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  list-style: none;
  padding: 0;
  margin: 0;
  z-index: 1001;
}

/* í•­ëª© ìŠ¤íƒ€ì¼ */
.nav-buttons li.dropdown ul.dropdown-content li a {
  display: block;
  padding: 0.6rem 1rem;
  color: white;
  text-decoration: none;
  font-size: 0.9rem;
}

.nav-buttons li.dropdown ul.dropdown-content li a:hover {
  background-color: #666;
}

/* ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ í‘œì‹œ */
.nav-buttons li.dropdown:hover ul.dropdown-content {
  display: block;
}

.nav-buttons ul {
  list-style: none;     /* â— ë§ˆì»¤ ì œê±° */
  display: flex;        /* ê°€ë¡œ ì •ë ¬ */
  gap: 1rem;            /* í•­ëª© ê°„ ê°„ê²© */
  margin: 0;
  padding: 0;
  align-items: center;  /* í–„ë²„ê±° ë²„íŠ¼ ë†’ì´ ì •ë ¬ */
}

.nav-buttons ul li {
  display: flex;
  align-items: center;
}
.nav-buttons {
  overflow: visible;
}

.nav-list {
  list-style: none;
  display: flex;
  gap: 1rem;
  margin: 0;
  padding: 0;
  overflow: visible;
}

.nav-list li {
  position: relative;
}

.nav-list li.dropdown .dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #444;
  padding: 0.5rem 0;
  min-width: 140px;
  border-radius: 5px;
  z-index: 1000;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}

.nav-list li.dropdown:hover .dropdown-content {
  display: block;
}

.nav-list li.dropdown .dropdown-content li a {
  display: block;
  padding: 0.5rem 1rem;
  color: white;
  text-decoration: none;
}

.nav-list li.dropdown .dropdown-content li a:hover {
  background-color: #666;
}




  </style>
</head>
<body>
   <div id="overlay"></div>

<header>
  <div class="school-name">í•œêµ­ì„±ì„œëŒ€í•™êµ</div>
  <nav class="nav-buttons">
    <ul class="nav-list">
      <li><a href="index.html">HOME</a></li>
      <li><a href="map.html">ì§€ë„</a></li>

      <li class="dropdown">
        <a href="#" class="dropbtn">ë¦¬ìŠ¤íŠ¸</a>
        <ul class="dropdown-content">
          <li><a href="list_restourant.html">ì‹ë‹¹ ì œíœ´</a></li>
          <li><a href="list_leisure.html">ì—¬ê°€ ì œíœ´</a></li>
        </ul>
      </li>

      <li><a href="external.html">ì™¸ë¶€ì—…ì²´</a></li>
      <li><button id="hamburger-btn" style="margin-top: -4px;">â˜°</button></li>
      <li><a href="login.html" class="signup">Sign Up</a></li>
    </ul>
  </nav>
</header>
<div id="overlay"></div>



  <main>
    <div class="view-toggle-buttons">
      <button id="show-all-markers">â†»</button>
      <button id="show-red-markers">ì‹ë‹¹</button>
      <button id="show-purple-markers">ì—¬ê°€</button>
      <button id="expand-view">ìì„¸íˆ ë³´ê¸°</button>
      <button id="collapse-view">ê°„ë‹¨íˆ ë³´ê¸°</button>
    </div>

   <div id="map-container">
  <div id="iframeBox">
    <button class="close-btn" onclick="closeIframe()">âœ–</button>
    <iframe id="infoFrame" src=""></iframe>
  </div>
  <div id="map"></div>
</div>


  </main>

  <aside id="side-nav" aria-label="ì‚¬ì´ë“œ ë‚´ë¹„ê²Œì´ì…˜">
  <button class="close-btn" aria-label="ì‚¬ì´ë“œ ë‚´ë¹„ ë‹«ê¸°">&times;</button>
  <nav>
    <ul>
      <li><a href="map.html">ì§€ë„ë¡œ ë³´ê¸°</a></li>
      <li>
        <button id="side-list-btn" aria-expanded="false" aria-controls="side-list-submenu">
          ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ê¸° â·
        </button>
        <ul id="side-list-submenu" aria-label="ë¦¬ìŠ¤íŠ¸ í•˜ìœ„ë©”ë‰´">
          <li><a href="list_restourant.html">ì‹ë‹¹ ì œíœ´</a></li>
          <li><a href="list_leisure.html">ì—¬ê°€ ì œíœ´</a></li>
        </ul>
      </li>
      <li><a href="external.html">ì™¸ë¶€ ì œíœ´</a></li>
      <li><a href="sitemap.html">ì‚¬ì´íŠ¸ë§µ</a></li>
      <li><a href="ask.html">ë¬¸ì˜</a></li>
      
      
    </ul>
  </nav>
</aside>
<div id="overlay"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script>
    const map = L.map('map', { attributionControl: false }).setView([37.6487780, 127.0643529], 16);

    const detailedTile = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    });

    const simpleTile = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      maxZoom: 19,
      attribution: '&copy; CartoDB'
    });

    simpleTile.addTo(map);
    let currentTile = simpleTile;

    document.getElementById("expand-view")?.addEventListener("click", () => {
      if (currentTile !== detailedTile) {
        map.removeLayer(currentTile);
        detailedTile.addTo(map);
        currentTile = detailedTile;
      }
    });

    document.getElementById("collapse-view")?.addEventListener("click", () => {
      if (currentTile !== simpleTile) {
        map.removeLayer(currentTile);
        simpleTile.addTo(map);
        currentTile = simpleTile;
      }
    });

    const greenIcon = L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });

    const redIcon = L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });

    const purpleIcon = L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-violet.png',
      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });

    function createLabelIcon(text) {
      return L.divIcon({
        className: 'label-icon',
        html: `<div class="label-text">${text}</div>`,
        iconAnchor: [15, 0],
        popupAnchor: [0, -30]
      });
    }

    const allMarkers = [];
    const redMarkers = [];
    const purpleMarkers = [];
    const baseMarkers = [];
const spiderfiedLabels = new Set(); // [ìˆ˜ì •ëœ ë¶€ë¶„] ìŠ¤íŒŒì´ë”ëœ ë¼ë²¨ ì¶”ì ìš©
const spiderfiedClusters = new Set(); // [ì¶”ê°€] ì—´ë¦° í´ëŸ¬ìŠ¤í„° ì¶”ì 

    const markerClusterGroup = L.markerClusterGroup({
      spiderfyOnMaxZoom: true,
      showCoverageOnHover: false,
      zoomToBoundsOnClick: true
    });
    map.addLayer(markerClusterGroup);

    const duplicateMap = new Map();


 // [ìˆ˜ì •] í´ëŸ¬ìŠ¤í„° í¼ì¹¨ ì‹œ í…ìŠ¤íŠ¸ë„ ìœ„ì¹˜ ì¡°ì • (ìµœëŒ€í•œ ê°€ê¹Œìš´ ê±°ë¦¬ì—ì„œ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ë°°ì¹˜)
    markerClusterGroup.on('spiderfied', (e) => {
      const all = [...allMarkers, ...baseMarkers];
      const angleStep = (2 * Math.PI) / e.cluster.getChildCount();
      let angle = 0;

      e.cluster.getAllChildMarkers().forEach((marker, i) => {
        const entry = all.find(e => e.marker === marker);
        if (entry) {
          const latlng = marker.getLatLng();
          const offsetDistance = 0.00012; // ì ë‹¹í•œ ê±°ë¦¬ ìœ ì§€
          const offsetLat = latlng.lat + Math.sin(angle) * offsetDistance;
          const offsetLng = latlng.lng + Math.cos(angle) * offsetDistance;
          entry.label.setLatLng([offsetLat, offsetLng]);
          angle += angleStep;
        }
      });
    });

    markerClusterGroup.on('unspiderfied', (e) => {
      const all = [...allMarkers, ...baseMarkers];
      e.cluster.getAllChildMarkers().forEach(marker => {
        const entry = all.find(e => e.marker === marker);
        if (entry) {
          const latlng = marker.getLatLng();
          entry.label.setLatLng(latlng);
        }
      });
    });

    markerClusterGroup.on('clusteringend', () => {
      const layers = markerClusterGroup.getLayers();
      if (layers.length > 0) {
        const group = new L.featureGroup(layers);
        map.fitBounds(group.getBounds().pad(0.2));
      }
    });

    function addMarkerWithLabel(lat, lng, labelText, popupText = '', icon = null, isBase = false, detailPage = null) {
      const coordKey = `${lat.toFixed(6)},${lng.toFixed(6)}`;
      const marker = L.marker([lat, lng], icon ? { icon } : {});

      if (popupText) {
        marker.bindPopup(popupText);
      }

      marker.on('click', () => {
        const destinationLatLng = [lat, lng]; 
        if (detailPage) openIframe(detailPage);
        drawRealRouteToBase([lat, lng]);

        setTimeout(() => {
          const mapContainer = document.getElementById('map-container');
          const isHalfMap = mapContainer?.classList.contains('half-map');
          let offsetX = 0;
          if (isHalfMap) {
            offsetX = map.getSize().x * -0.25;
          }
          const point = map.latLngToContainerPoint(destinationLatLng);
          const centered = L.point(point.x - offsetX, point.y);
          const target = map.containerPointToLatLng(centered);
          map.setView(target, map.getZoom(), { animate: true });
        }, 300);
      });

      const label = L.marker([lat, lng], {
        icon: createLabelIcon(labelText),
        interactive: false,
        keyboard: false
      });

      if (!duplicateMap.has(coordKey)) {
        duplicateMap.set(coordKey, []);
      }
      duplicateMap.get(coordKey).push(marker);

      if (duplicateMap.get(coordKey).length > 1) {
        markerClusterGroup.addLayers(duplicateMap.get(coordKey));
      } else {
        map.addLayer(marker);
      }
      map.addLayer(label);

      const entry = { marker, label, icon };
      if (isBase) baseMarkers.push(entry);
      else allMarkers.push(entry);

      if (icon === redIcon) redMarkers.push(entry);
      else if (icon === purpleIcon) purpleMarkers.push(entry);

      return entry;
    }

    function showMarkersWithBase(extraMarkers) {
      const combined = [...baseMarkers, ...extraMarkers];

      markerClusterGroup.clearLayers();
      [...allMarkers, ...baseMarkers].forEach(({ marker, label }) => {
        map.removeLayer(marker);
        map.removeLayer(label);
      });

      combined.forEach(({ marker, label }) => {
        const latlng = marker.getLatLng();
        const coordKey = `${latlng.lat.toFixed(6)},${latlng.lng.toFixed(6)}`;
        if (duplicateMap.has(coordKey) && duplicateMap.get(coordKey).length > 1) {
          markerClusterGroup.addLayers(duplicateMap.get(coordKey));
        } else {
          map.addLayer(marker);
        }
        map.addLayer(label);
      });
    }

    document.getElementById("show-all-markers")?.addEventListener("click", () => {
      showMarkersWithBase(allMarkers);
    });
    document.getElementById("show-red-markers")?.addEventListener("click", () => {
      showMarkersWithBase(redMarkers);
    });
    document.getElementById("show-purple-markers")?.addEventListener("click", () => {
      showMarkersWithBase(purpleMarkers);
    });


      
    
    function showMarkersWithBase(extraMarkers) {
      const combined = [...baseMarkers, ...extraMarkers];

      // ì „ì²´ ì œê±°
      [...baseMarkers, ...allMarkers].forEach(({ marker, label }) => {
        map.removeLayer(marker);
        map.removeLayer(label);
      });

      // ë‹¤ì‹œ ì¶”ê°€
      combined.forEach(({ marker, label }) => {
        marker.addTo(map);
        label.addTo(map);
      });
    }

// í•­ìƒ í‘œì‹œë˜ëŠ” ë§ˆì»¤
    addMarkerWithLabel(37.6487780, 127.0643529, 'í•œêµ­ì„±ì„œëŒ€í•™êµ', 'í•œêµ­ì„±ì„œëŒ€í•™êµ', greenIcon, true);
    addMarkerWithLabel(37.6562678, 127.0630304, 'ë…¸ì›ì—­', 'ë…¸ì›ì—­', null, true);
    addMarkerWithLabel(37.6448907, 127.0642467, 'ì¤‘ê³„ì—­', 'ì¤‘ê³„ì—­', null, true);

 // ë¶„ë¥˜ë˜ëŠ” ë§ˆì»¤
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ê¶Œìˆœì˜¥ê¹€ë°¥', 'ê¶Œìˆœì˜¥ê¹€ë°¥', redIcon, false, "info.html?name=ê¶Œìˆœì˜¥ê¹€ë°¥");
addMarkerWithLabel(37.6502520069594, 127.062180018954, 'ì‹œì¥í’ê²½ êµ­ì‹œì§‘', 'ì‹œì¥í’ê²½ êµ­ì‹œì§‘', redIcon, false, "info.html?name=ì‹œì¥í’ê²½ êµ­ì‹œì§‘");
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ë…¸ì›ìˆ˜ì œë¹„', 'ë…¸ì›ìˆ˜ì œë¹„', redIcon, false, "info.html?name=ë…¸ì›ìˆ˜ì œë¹„");
addMarkerWithLabel(37.6561357418001, 127.063442617087, 'ë‹ˆë½•ë‚´ë½• ë…¸ì›ì—­ì ', 'ë‹ˆë½•ë‚´ë½• ë…¸ì›ì—­ì ', redIcon, false, "info.html?name=ë‹ˆë½•ë‚´ë½• ë…¸ì›ì—­ì ");
addMarkerWithLabel(37.6557918268818, 127.062277905261, 'ë¡¯ë°ë¦¬ì•„ ë…¸ì›ì—­ì ', 'ë¡¯ë°ë¦¬ì•„ ë…¸ì›ì—­ì ', redIcon, false, "info.html?name=ë¡¯ë°ë¦¬ì•„ ë…¸ì›ì—­ì ");
addMarkerWithLabel(37.6498808620377, 127.062236934343, 'ë°€ì•Œìƒëˆê¹ŒìŠ¤', 'ë°€ì•Œìƒëˆê¹ŒìŠ¤', redIcon, false, "info.html?name=ë°€ì•Œìƒëˆê¹ŒìŠ¤");
addMarkerWithLabel(37.6502520069594, 127.062180018954, 'ë³„í•™ê³¨ëª…í’ˆì†Œë¨¸ë¦¬êµ­ë°¥', 'ë³„í•™ê³¨ëª…í’ˆì†Œë¨¸ë¦¬êµ­ë°¥', redIcon,false, "info.html?name=ë³„í•™ê³¨ëª…í’ˆì†Œë¨¸ë¦¬êµ­ë°¥");
addMarkerWithLabel(37.6552190449765, 127.063512438351, 'ìƒëŸ¬ë”” ë…¸ì›ì—­ì ', 'ìƒëŸ¬ë”” ë…¸ì›ì—­ì ', redIcon, false,"info.html?name=ìƒëŸ¬ë”” ë…¸ì›ì—­ì ");
addMarkerWithLabel(37.6500649811573, 127.061284207288, 'ìˆ˜ìœ ë¦¬ìš°ë™ì§‘ ìƒê³„ë°±ë³‘ì›ì ', 'ìˆ˜ìœ ë¦¬ìš°ë™ì§‘ ìƒê³„ë°±ë³‘ì›ì ', redIcon, false, "info.html?name=ìˆ˜ìœ ë¦¬ìš°ë™ì§‘ ìƒê³„ë°±ë³‘ì›ì ");
addMarkerWithLabel(37.6479984188148, 127.062272983643, 'ìŠˆì—”ì°¨ì´ ìƒê³„ì ', 'ìŠˆì—”ì°¨ì´ ìƒê³„ì ', redIcon, false, "info.html?name=ìŠˆì—”ì°¨ì´ ìƒê³„ì ");
addMarkerWithLabel(37.6557918268818, 127.062277905261, 'ì‹ ë¯¸ë°©ë§ˆë¼íƒ• ë…¸ì›ì ', 'ì‹ ë¯¸ë°©ë§ˆë¼íƒ• ë…¸ì›ì ', redIcon, false,"info.html?name=ì‹ ë¯¸ë°©ë§ˆë¼íƒ• ë…¸ì›ì ");
addMarkerWithLabel(37.6500649811573, 127.061284207288, 'ì‹ í™”ì­ˆê¾¸ë¯¸ ë…¸ì›ë³¸ì ', 'ì‹ í™”ì­ˆê¾¸ë¯¸ ë…¸ì›ë³¸ì ', redIcon, false, "info.html?name=ì‹ í™”ì­ˆê¾¸ë¯¸ ë…¸ì›ë³¸ì ");
addMarkerWithLabel(37.648494374797, 127.061997930473, 'ì˜ì„±ì‹ë‹¹', 'ì˜ì„±ì‹ë‹¹', redIcon, false, "info.html?name=ì˜ì„±ì‹ë‹¹");
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ì£½ì´ì•¼ê¸°', 'ì£½ì´ì•¼ê¸°', redIcon, false, "info.html?name=ì£½ì´ì•¼ê¸°");
addMarkerWithLabel(37.6546912567327, 127.059166814405, 'í¬ë©”ì¸ ë…¸ì›ì ', 'í¬ë©”ì¸ ë…¸ì›ì ', redIcon, false,"info.html?name=í¬ë©”ì¸ ë…¸ì›ì ");
addMarkerWithLabel(37.6533222020818, 127.05936970723, 'Poke all day í¬ì¼€&ìƒëŸ¬ë“œ ë…¸ì›ì ', 'Poke all day í¬ì¼€&ìƒëŸ¬ë“œ ë…¸ì›ì ', redIcon,false, "info.html?name=Poke all day í¬ì¼€ ì•¤ ìƒëŸ¬ë“œ ë…¸ì›ì ");
addMarkerWithLabel(37.6568911030589, 127.064972949542, 'ì©ìŠ¤ë²„ê±°', 'ì©ìŠ¤ë²„ê±°', redIcon,false, "info.html?name=ì©ìŠ¤ë²„ê±°");
addMarkerWithLabel(37.6527180726916, 127.061519941724, 'í”¼ììŠ¤ì¿¨ ë…¸ì›ì ', 'í”¼ììŠ¤ì¿¨ ë…¸ì›ì ', redIcon, false,"info.html?name=í”¼ììŠ¤ì¿¨ ë…¸ì›ì ");
addMarkerWithLabel(37.6561357418001, 127.063442617087, 'ì¹˜íˆë¡œ ë…¸ì›ì ', 'ì¹˜íˆë¡œ ë…¸ì›ì ', redIcon, false, "info.html?name=ì¹˜íˆë¡œ ë…¸ì›ì ");
addMarkerWithLabel(37.6494212678049, 127.061555296287, 'í¥ë¶€ì†¥ëšœê»‘ ìƒì‚¼ê²¹ì‚´ ë…¸ì›ë³¸ì ', 'í¥ë¶€ì†¥ëšœê»‘ ìƒì‚¼ê²¹ì‚´ ë…¸ì›ë³¸ì ', redIcon, false, "info.html?name=í¥ë¶€ì†¥ëšœê»‘ ìƒì‚¼ê²¹ì‚´ ë…¸ì›ë³¸ì ");
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ë…¸ì›ê³ ë¡œì¼€', 'ë…¸ì›ê³ ë¡œì¼€', redIcon, false, "info.html?name=ë…¸ì›ê³ ë¡œì¼€");
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ëª…ë‘í•«ë„ê·¸', 'ëª…ë‘í•«ë„ê·¸', redIcon, false, "info.html?name=ëª…ë‘í•«ë„ê·¸");
addMarkerWithLabel(37.6492335099837, 127.062399341832, 'ì»´í¬ì¦ˆì»¤í”¼ ìƒê³„ë°±ë³‘ì›ì ', 'ì»´í¬ì¦ˆì»¤í”¼ ìƒê³„ë°±ë³‘ì›ì ', redIcon, false, "info.html?name=ì»´í¬ì¦ˆì»¤í”¼ ìƒê³„ë°±ë³‘ì›ì ");

addMarkerWithLabel(37.5436079641311, 127.07041131957, 'ê±°ë¶ì´ ë³´ë“œê²Œì„ ì¹´í˜', 'ê±°ë¶ì´ ë³´ë“œê²Œì„ ì¹´í˜', purpleIcon, false, "info.html?name=ê±°ë¶ì´ ë³´ë“œê²Œì„ ì¹´í˜");
addMarkerWithLabel(37.5436079641311, 127.07041131957, 'ê¹€í˜¸ì¦ëª¨ê°€ë°œ ë¦¬ë””ì•„153 ë…¸ì›ì ', 'ê¹€í˜¸ì¦ëª¨ê°€ë°œ ë¦¬ë””ì•„153 ë…¸ì›ì ', purpleIcon, false, "info.html?name=ê¹€í˜¸ì¦ëª¨ê°€ë°œ ë¦¬ë””ì•„153 ë…¸ì›ì ");
addMarkerWithLabel(37.6494044777358, 127.062302373264, 'ë“œëë”í•í”¼í‹°ìŠ¤íŠœë””ì˜¤', 'ë“œëë”í•í”¼í‹°ìŠ¤íŠœë””ì˜¤', purpleIcon, false, "info.html?name=ë“œëë”í•í”¼í‹°ìŠ¤íŠœë””ì˜¤");
addMarkerWithLabel(37.6571079121252, 127.063254867375, 'ë”ë©”ì´ì¦ˆ ë…¸ì›ì ', 'ë”ë©”ì´ì¦ˆ ë…¸ì›ì ', purpleIcon, false, "info.html?name=ë”ë©”ì´ì¦ˆ ë…¸ì›ì ");
addMarkerWithLabel(37.6506100117206, 127.061234228831, 'ë‹¤ë¹„ì¹˜ ì•ˆê²½ ë…¸ì›ìƒê³„ë°±ë³‘ì›ê±´ë„ˆì ', 'ë‹¤ë¹„ì¹˜ ì•ˆê²½ ë…¸ì›ìƒê³„ë°±ë³‘ì›ê±´ë„ˆì ', purpleIcon,  false, "info.html?name=ë‹¤ë¹„ì¹˜ ì•ˆê²½ ë…¸ì›ìƒê³„ë°±ë³‘ì›ê±´ë„ˆì ");
addMarkerWithLabel(37.6504403325764, 127.061280549621, 'ë””í†¤í—¤ì–´ (êµ¬ ì œì´ë¹› í—¤ì–´)', 'ë””í†¤í—¤ì–´ (êµ¬ ì œì´ë¹› í—¤ì–´)', purpleIcon, false, "info.html?name=ë””í†¤í—¤ì–´ (êµ¬ ì œì´ë¹› í—¤ì–´)");
addMarkerWithLabel(37.660676910032, 127.061495568943, 'ë£¨í”„ì‰˜í•˜ìš°ìŠ¤', 'ë£¨í”„ì‰˜í•˜ìš°ìŠ¤', purpleIcon, false, "info.html?name=ë£¨í”„ì‰˜í•˜ìš°ìŠ¤");
addMarkerWithLabel(37.6459751467144, 127.064166413458, 'ë¹Œë¦¬ë²„ì§ ì¤‘ê³„ì—­ì ', 'ë¹Œë¦¬ë²„ì§ ì¤‘ê³„ì—­ì ', purpleIcon, false, "info.html?name=ë¹Œë¦¬ë²„ì§ ì¤‘ê³„ì—­ì ");
addMarkerWithLabel(37.6505421411218, 127.06197526951, 'ìƒëª…ì˜ë§ì”€ì‚¬', 'ìƒëª…ì˜ë§ì”€ì‚¬', purpleIcon,false,  "info.html?name=ìƒëª…ì˜ë§ì”€ì‚¬");
addMarkerWithLabel(37.6548752644222, 127.06192277535, 'ì•„ì´ì¡´íŒ', 'ì•„ì´ì¡´íŒ', purpleIcon, false, "info.html?name=ì•„ì´ì¡´íŒ");
addMarkerWithLabel(37.6542725250696, 127.061716819928, 'ì˜¨ ìŠ¤í„°ë”” ì¹´í˜', 'ì˜¨ ìŠ¤í„°ë”” ì¹´í˜', purpleIcon, false, "info.html?name=ì˜¨ ìŠ¤í„°ë”” ì¹´í˜");
addMarkerWithLabel(37.6538758836589, 127.061772133025, 'ì˜¤ëŠ˜, ìš°ë¦¬ ì‚¬ì§„ê´€', 'ì˜¤ëŠ˜, ìš°ë¦¬ ì‚¬ì§„ê´€', purpleIcon, false, "info.html?name=ì˜¤ëŠ˜, ìš°ë¦¬ ì‚¬ì§„ê´€");
addMarkerWithLabel(37.6552190449765, 127.063512438351, 'ì•ŒíŒŒ ìƒê³„ì ', 'ì•ŒíŒŒ ìƒê³„ì ', purpleIcon, false, "info.html?name=ì•ŒíŒŒ ìƒê³„ì ");
addMarkerWithLabel(37.6468094778429, 127.062619518352, 'ì•„í”„ë¦¬ì¹´ì½”ì¸ë…¸ë˜ë°©', 'ì•„í”„ë¦¬ì¹´ì½”ì¸ë…¸ë˜ë°©', purpleIcon, false, "info.html?name=ì•„í”„ë¦¬ì¹´ì½”ì¸ë…¸ë˜ë°©");
addMarkerWithLabel(37.6498808620377, 127.062236934343, 'ì—ì´ë°”í—¤ì–´', 'ì—ì´ë°”í—¤ì–´', purpleIcon, false, "info.html?name=ì—ì´ë°”í—¤ì–´");
addMarkerWithLabel(37.6563543249568, 127.062249590194, 'ì¡°ì•„ì½”ì¸ë…¸ë˜ë°©', 'ì¡°ì•„ì½”ì¸ë…¸ë˜ë°©', purpleIcon, false, "info.html?name=ì¡°ì•„ì½”ì¸ë…¸ë˜ë°©");
addMarkerWithLabel(37.652229087473, 127.069966188528, 'ì¿ ë°©í”ŒëŸ¬ìŠ¤', 'ì¿ ë°©í”ŒëŸ¬ìŠ¤', purpleIcon, false, "info.html?name=ì¿ ë°©í”ŒëŸ¬ìŠ¤");
addMarkerWithLabel(37.6487051824451, 127.061869040263, 'ì¬ì´í•œì˜ì›', 'ì¬ì´í•œì˜ì›', purpleIcon, false, "info.html?name=ì¬ì´í•œì˜ì›");
addMarkerWithLabel(37.6483312484445, 127.062089919265, 'ì¤‘ê³„ í•„ë¼í…ŒìŠ¤ ì¸', 'ì¤‘ê³„ í•„ë¼í…ŒìŠ¤ ì¸', purpleIcon, false, "info.html?name=ì¤‘ê³„ í•„ë¼í…ŒìŠ¤ ì¸");
addMarkerWithLabel(37.6495558747738, 127.062241988995, 'ì¤‘ê³„ì£¼ì§“ìˆ˜', 'ì¤‘ê³„ì£¼ì§“ìˆ˜', purpleIcon, false, "info.html?name=ì¤‘ê³„ì£¼ì§“ìˆ˜");
addMarkerWithLabel(37.6509128734287, 127.061845828421, 'í•‘íë¼ì´ì˜¨ìŠ¤í´ëŸ½', 'í•‘íë¼ì´ì˜¨ìŠ¤í´ëŸ½', purpleIcon, false, "info.html?name=í•‘íë¼ì´ì˜¨ìŠ¤í´ëŸ½");
addMarkerWithLabel(37.6468094778429, 127.062619518352, 'í¬í¬PCë°©', 'í¬í¬PCë°©', purpleIcon, false, "info.html?name=í¬í¬PCë°©");
addMarkerWithLabel(37.6584150610173, 127.064412163475, 'í¼í“¸í”Œë ˆì´', 'í¼í“¸í”Œë ˆì´', purpleIcon, false, "info.html?name=í¼í“¸í”Œë ˆì´");
addMarkerWithLabel(37.6557918268818, 127.062277905261, 'í™ˆì¦ˆì•¤ë£¨íŒ¡ ë³´ë“œê²Œì„ì¹´í˜', 'í™ˆì¦ˆì•¤ë£¨íŒ¡ ë³´ë“œê²Œì„ì¹´í˜', purpleIcon, false, "info.html?name=í™ˆì¦ˆì•¤ë£¨íŒ¡ ë³´ë“œê²Œì„ì¹´í˜");
addMarkerWithLabel(37.6561357418001, 127.063442617087, 'íœ´ì‹ ë…¸ì›1í˜¸ì ', 'íœ´ì‹ ë…¸ì›1í˜¸ì ', purpleIcon, false, "info.html?name=íœ´ì‹ ë…¸ì›1í˜¸ì ");

 
  document.getElementById("show-all-markers").addEventListener("click", () => {
      showMarkersWithBase(allMarkers);
    });

    document.getElementById("show-red-markers").addEventListener("click", () => {
      showMarkersWithBase(redMarkers);
    });

    document.getElementById("show-purple-markers").addEventListener("click", () => {
      showMarkersWithBase(purpleMarkers);
    });

    map.on('zoomend', () => {
      const zoom = map.getZoom();
      const newSize = 12 + (zoom - 15) * 1.8;
      document.querySelectorAll('.label-text').forEach(label => {
        label.style.fontSize = `${newSize}px`;
      });
    });

    // ì‚¬ì´ë“œ ë‚´ë¹„ê²Œì´ì…˜
    const hamburgerBtn = document.getElementById("hamburger-btn");
    const sideNav = document.getElementById("side-nav");
    const closeBtn = document.querySelector("#side-nav .close-btn");
    const overlay = document.getElementById("overlay");

    hamburgerBtn.addEventListener("click", () => {
      sideNav.classList.add("open");
      overlay.classList.add("active");
    });

    closeBtn.addEventListener("click", () => {
      sideNav.classList.remove("open");
      overlay.classList.remove("active");
    });

    overlay.addEventListener("click", () => {
      sideNav.classList.remove("open");
      overlay.classList.remove("active");
    });

    const sideListBtn = document.getElementById("side-list-btn");
    const sideListSubmenu = document.getElementById("side-list-submenu");

    sideListBtn.addEventListener("click", () => {
      const isOpen = sideListSubmenu.style.display === "flex";
      if (isOpen) {
        sideListSubmenu.style.display = "none";
        sideListBtn.textContent = "ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ê¸° â·";
        sideListBtn.setAttribute("aria-expanded", "false");
      } else {
        sideListSubmenu.style.display = "flex";
        sideListBtn.textContent = "ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ê¸° â¶";
        sideListBtn.setAttribute("aria-expanded", "true");
      }
    });


function openIframe(url) {
  const mapContainer = document.getElementById('map-container');
  const infoFrame = document.getElementById('infoFrame');
  mapContainer.classList.add('half-map');
  infoFrame.src = url;
  infoFrame.style.display = "block"; // â† ì´ ì¤„ ì¶”ê°€!
}

function closeIframe() {
  const mapContainer = document.getElementById('map-container');
  const infoFrame = document.getElementById('infoFrame');
  mapContainer.classList.remove('half-map');
  infoFrame.src = '';
  infoFrame.style.display = "none"; // â† ì´ ì¤„ ì¶”ê°€!
}


let currentRoute = null;

function drawRealRouteToBase(destinationLatLng) {
  
  const baseCoords = [127.0643529, 37.6487780];
  const destCoords = [destinationLatLng[1], destinationLatLng[0]];

  fetch("https://api.openrouteservice.org/v2/directions/foot-walking/geojson", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "5b3ce3597851110001cf62481a5f204986714b06a851c1794e6ec7db"
    },
    body: JSON.stringify({
      coordinates: [baseCoords, destCoords]
    })
  })
    .then(res => res.json())
    .then(data => {
      if (!data.features || data.features.length === 0) {
        alert("ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }

      if (currentRoute) map.removeLayer(currentRoute);

      currentRoute = L.geoJSON(data, {
        style: {
          color: '#4a90e2',
          weight: 5,
          opacity: 0.85,
          dashArray: '8, 6, 2, 6'
        }
      }).addTo(map);

      const summary = data.features[0].properties.summary;
      const distanceKm = (summary.distance / 1000).toFixed(2);
      const durationMin = Math.ceil(summary.duration / 60);

   L.popup({
  autoPan: false,
  
  closeOnClick: false,
  offset: [0, -20] // í•„ìš”ì‹œ ë¯¸ì„¸í•œ ìœ„ì¹˜ ì¡°ì •
})
.setLatLng(destinationLatLng)
.setContent(`<b>ë„ë³´ ê±°ë¦¬:</b> ${distanceKm}km<br><b>ì˜ˆìƒ ì‹œê°„:</b> ${durationMin}ë¶„`)
.openOn(map);


    })
    .catch(err => {
      console.error("ê²½ë¡œë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.", err);
      alert("ê²½ë¡œ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    });
}

function offsetLatLng(latlng, offsetX, offsetY) {
  // ì§€ë„ì—ì„œ í”½ì…€ ì¢Œí‘œë¡œ ë³€í™˜ â†’ ì˜¤í”„ì…‹ ì¶”ê°€ â†’ ì§€ë¦¬ ì¢Œí‘œë¡œ ì¬ë³€í™˜
  const point = map.latLngToContainerPoint(latlng);
  const newPoint = L.point(point.x + offsetX, point.y + offsetY);
  return map.containerPointToLatLng(newPoint);
}

  </script>




<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD-itP2Il2kZYzm-4BXL5wXXphp5gnTN3U",
    authDomain: "web-programing-6218e.firebaseapp.com",
    projectId: "web-programing-6218e",
    appId: "1:687421762824:web:be3d91a6c66d304a32d0bd"
  };
  firebase.initializeApp(firebaseConfig);
  // âœ… ì „ì—­ì— ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ ì¶”ê°€
let currentUser; // ë˜ëŠ” var currentUser;
  const auth = firebase.auth();

  
    
auth.onAuthStateChanged(user => {
  currentUser = user; // âœ… ì „ì—­ ì €ì¥

  const signupBtn = document.querySelector(".signup");
  if (!signupBtn) return;

  const homeBtn = signupBtn.cloneNode(true);
  signupBtn.parentNode.replaceChild(homeBtn, signupBtn);

  if (user) {
    homeBtn.textContent = "Log out";
    homeBtn.onclick = () => {
      auth.signOut().then(() => location.reload());
    };
  } else {
    homeBtn.textContent = "Sign Up";
    homeBtn.onclick = () => {
      window.location.href = "login.html";
    };
  }
// âœ… ë¡œê·¸ì¸ í™•ì¸ í›„ ì ‘ê·¼ ì œí•œ ì²˜ë¦¬ /*
  const protectedPages = ["list_restourant.html","list_leisure.html", "map.html", "external.html", "ask.html","sitemap.html"];
  const currentPath = window.location.pathname.split("/").pop();
  if (!user && protectedPages.includes(currentPath)) {
    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    window.location.href = "login.html";
  }
});



</script>

<script>
  // URL íŒŒë¼ë¯¸í„°ë¡œë¶€í„° `place` ê°’ì„ ê°€ì ¸ì˜¤ê¸°
  const urlParams = new URLSearchParams(window.location.search);
  const placeToFocus = urlParams.get('place');

  // í˜ì´ì§€ ë¡œë“œ ì´í›„ì— ë§ˆì»¤ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ëŠ” ë§ˆì»¤ë¥¼ ì°¾ì•„ í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ
  if (placeToFocus) {
    setTimeout(() => {
      const matchedMarker = allMarkers.find(({ marker }) => marker.getPopup()?.getContent() === placeToFocus);
      if (matchedMarker) {
        matchedMarker.marker.fire('click');
        map.setView(matchedMarker.marker.getLatLng(), 17); // í™•ëŒ€ë„ ì¡°ì •
      }
    }, 800); // ë§ˆì»¤ ë¡œë”© ì´í›„ ì‹œì  ë³´ì¥ (ì•½ê°„ì˜ ë”œë ˆì´ í•„ìš”)
  }
</script>



</body>
</html> 